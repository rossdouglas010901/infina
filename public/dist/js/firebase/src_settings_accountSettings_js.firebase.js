"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkpublic"] = self["webpackChunkpublic"] || []).push([["src_settings_accountSettings_js"],{

/***/ "./src/settings/accountSettings.js":
/*!*****************************************!*\
  !*** ./src/settings/accountSettings.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"./node_modules/firebase/auth/dist/index.esm.js\");\n/* harmony import */ var _config_firebase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/firebase.js */ \"./src/config/firebase.js\");\n/* harmony import */ var _functions_update__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../functions/update */ \"./src/functions/update.js\");\n/* harmony import */ var _functions_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../functions/dom */ \"./src/functions/dom.js\");\n/* harmony import */ var _functions_settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../functions/settings */ \"./src/functions/settings.js\");\n// Importing External Modules\r\n\r\n\r\n// Importing Internal Modules\r\n\r\n\r\n\r\n\r\n\r\n// Setting Up modules\r\nconst firebaseApp = (0,_config_firebase_js__WEBPACK_IMPORTED_MODULE_1__.getFirebaseApp)();\r\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.getAuth)(firebaseApp);\r\n\r\n// Setting up route\r\nconst baseURL = window.location.protocol + '//' + window.location.host + '/';\r\nconst route = window.location.href.replace(baseURL,'').replace(/\\/$/, \"\").toLowerCase();\r\n\r\n// running alow save on page load incse the ui Updates and chnages werent saved yet\r\nallowSave();\r\n\r\n// Setting Up event listeners\r\nauth.onAuthStateChanged(function(user) {\r\n    if (user && route == \"app/settings\") {\r\n\r\n        // Getting elements\r\n        const elmt = (0,_functions_dom__WEBPACK_IMPORTED_MODULE_3__.importELemntsByID)([\r\n            \"verifyEmailButton\",\r\n            \"saveProfileButton\",\r\n            \"settingsDisplayName\",\r\n            \"settingsEmail\",\r\n            \"settingsPhoneNumber\"\r\n        ]);\r\n\r\n        // Adding event listners for buttons\r\n        elmt.verifyEmailButton.addEventListener(\"click\", verifyEmail, false);\r\n        elmt.saveProfileButton.addEventListener(\"click\", updateUserInfo, false);\r\n\r\n        // Adding event listerns for the save button\r\n        elmt.settingsDisplayName.addEventListener(\"input\", allowSave, false);\r\n        elmt.settingsEmail.addEventListener(\"input\", allowSave, false);\r\n        elmt.settingsPhoneNumber.addEventListener(\"input\", allowSave, false);\r\n    }\r\n});\r\n\r\n// Updating User Info\r\nasync function updateUserInfo(){\r\n\r\n    // Getting Elements\r\n    const elmt = (0,_functions_dom__WEBPACK_IMPORTED_MODULE_3__.importELemntsByID)([\r\n        \"settingsDisplayName\",\r\n        \"saveProfileButton\"\r\n    ]);\r\n\r\n    let newUsername;\r\n\r\n    if(auth.currentUser.displayName !== elmt.settingsDisplayName.value\r\n    && elmt.settingsDisplayName.value !== null){\r\n        newUsername = elmt.settingsDisplayName.value.trim().replace(/ +(?= )/g,'');\r\n    }\r\n\r\n    (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.updateProfile)(auth.currentUser, {\r\n        displayName: newUsername\r\n      }).then(() => {\r\n\r\n        elmt.saveProfileButton.innerHTML = '<i class=\"uil uil-check\"></i> Saved';\r\n\r\n        (0,_functions_update__WEBPACK_IMPORTED_MODULE_2__.updateUI)();\r\n      }).catch((error) => {\r\n        elmt.saveProfileButton.innerHTML = '<i class=\"uil uil-times\"></i> Unable to Save';\r\n      });\r\n}\r\n\r\n// Sending verification email\r\nasync function verifyEmail() {\r\n    (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendEmailVerification)(auth.currentUser)\r\n    .then(() => {\r\n        alert('verification Email sent')\r\n        ;(0,_functions_update__WEBPACK_IMPORTED_MODULE_2__.updateUI)();\r\n    });\r\n}\r\n\r\nfunction allowSave(){\r\n    auth.onAuthStateChanged(function(user) {\r\n        if (user && route == \"app/settings\") {\r\n    \r\n            // Getting Elements\r\n            const elmt = (0,_functions_dom__WEBPACK_IMPORTED_MODULE_3__.importELemntsByID)([\r\n                \"settingsDisplayName\",\r\n                \"settingsEmail\",\r\n                \"settingsPhoneNumber\",\r\n                \"saveProfileButton\"\r\n            ]);\r\n\r\n            elmt.saveProfileButton.innerHTML = '<i class=\"uil uil-save\"></i> Save';\r\n        \r\n            if(elmt.settingsDisplayName.value !== user.displayName\r\n            && elmt.settingsEmail.value !== user.email\r\n            && elmt.settingsPhoneNumber.value !== user.phoneNumber){\r\n                (0,_functions_settings__WEBPACK_IMPORTED_MODULE_4__.enableSaveButton)('saveProfileButton');\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction disAllowSave(){\r\n    (0,_functions_settings__WEBPACK_IMPORTED_MODULE_4__.disableSaveButton)('saveProfileButton');\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3MvYWNjb3VudFNldHRpbmdzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ2tHO0FBQ2xHO0FBQ0E7QUFDdUQ7QUFDUjtBQUNLO0FBQ3VCO0FBQzNFO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQWM7QUFDbEMsYUFBYSxzREFBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpRUFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpRUFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNERBQWE7QUFDakI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBUTtBQUNoQixPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9FQUFxQjtBQUN6QjtBQUNBO0FBQ0EsUUFBUSw0REFBUTtBQUNoQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaUVBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUVBQWdCO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFpQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL3B1YmxpYy8uL3NyYy9zZXR0aW5ncy9hY2NvdW50U2V0dGluZ3MuanM/MjExMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRpbmcgRXh0ZXJuYWwgTW9kdWxlc1xyXG5pbXBvcnQgeyBnZXRBdXRoLCB1cGRhdGVQcm9maWxlLCBzZW5kRW1haWxWZXJpZmljYXRpb24sIG9uQXV0aFN0YXRlQ2hhbmdlZCB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XHJcblxyXG4vLyBJbXBvcnRpbmcgSW50ZXJuYWwgTW9kdWxlc1xyXG5pbXBvcnQgeyBnZXRGaXJlYmFzZUFwcCB9IGZyb20gXCIuLi9jb25maWcvZmlyZWJhc2UuanNcIjtcclxuaW1wb3J0IHsgdXBkYXRlVUkgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL3VwZGF0ZVwiO1xyXG5pbXBvcnQgeyBpbXBvcnRFTGVtbnRzQnlJRCB9IGZyb20gXCIuLi9mdW5jdGlvbnMvZG9tXCJcclxuaW1wb3J0IHsgZW5hYmxlU2F2ZUJ1dHRvbiwgZGlzYWJsZVNhdmVCdXR0b24gfSBmcm9tIFwiLi4vZnVuY3Rpb25zL3NldHRpbmdzXCJcclxuXHJcbi8vIFNldHRpbmcgVXAgbW9kdWxlc1xyXG5jb25zdCBmaXJlYmFzZUFwcCA9IGdldEZpcmViYXNlQXBwKCk7XHJcbmNvbnN0IGF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcclxuXHJcbi8vIFNldHRpbmcgdXAgcm91dGVcclxuY29uc3QgYmFzZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICcvJztcclxuY29uc3Qgcm91dGUgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKGJhc2VVUkwsJycpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuLy8gcnVubmluZyBhbG93IHNhdmUgb24gcGFnZSBsb2FkIGluY3NlIHRoZSB1aSBVcGRhdGVzIGFuZCBjaG5hZ2VzIHdlcmVudCBzYXZlZCB5ZXRcclxuYWxsb3dTYXZlKCk7XHJcblxyXG4vLyBTZXR0aW5nIFVwIGV2ZW50IGxpc3RlbmVyc1xyXG5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbih1c2VyKSB7XHJcbiAgICBpZiAodXNlciAmJiByb3V0ZSA9PSBcImFwcC9zZXR0aW5nc1wiKSB7XHJcblxyXG4gICAgICAgIC8vIEdldHRpbmcgZWxlbWVudHNcclxuICAgICAgICBjb25zdCBlbG10ID0gaW1wb3J0RUxlbW50c0J5SUQoW1xyXG4gICAgICAgICAgICBcInZlcmlmeUVtYWlsQnV0dG9uXCIsXHJcbiAgICAgICAgICAgIFwic2F2ZVByb2ZpbGVCdXR0b25cIixcclxuICAgICAgICAgICAgXCJzZXR0aW5nc0Rpc3BsYXlOYW1lXCIsXHJcbiAgICAgICAgICAgIFwic2V0dGluZ3NFbWFpbFwiLFxyXG4gICAgICAgICAgICBcInNldHRpbmdzUGhvbmVOdW1iZXJcIlxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICAvLyBBZGRpbmcgZXZlbnQgbGlzdG5lcnMgZm9yIGJ1dHRvbnNcclxuICAgICAgICBlbG10LnZlcmlmeUVtYWlsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB2ZXJpZnlFbWFpbCwgZmFsc2UpO1xyXG4gICAgICAgIGVsbXQuc2F2ZVByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVwZGF0ZVVzZXJJbmZvLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIEFkZGluZyBldmVudCBsaXN0ZXJucyBmb3IgdGhlIHNhdmUgYnV0dG9uXHJcbiAgICAgICAgZWxtdC5zZXR0aW5nc0Rpc3BsYXlOYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBhbGxvd1NhdmUsIGZhbHNlKTtcclxuICAgICAgICBlbG10LnNldHRpbmdzRW1haWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGFsbG93U2F2ZSwgZmFsc2UpO1xyXG4gICAgICAgIGVsbXQuc2V0dGluZ3NQaG9uZU51bWJlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgYWxsb3dTYXZlLCBmYWxzZSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gVXBkYXRpbmcgVXNlciBJbmZvXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJJbmZvKCl7XHJcblxyXG4gICAgLy8gR2V0dGluZyBFbGVtZW50c1xyXG4gICAgY29uc3QgZWxtdCA9IGltcG9ydEVMZW1udHNCeUlEKFtcclxuICAgICAgICBcInNldHRpbmdzRGlzcGxheU5hbWVcIixcclxuICAgICAgICBcInNhdmVQcm9maWxlQnV0dG9uXCJcclxuICAgIF0pO1xyXG5cclxuICAgIGxldCBuZXdVc2VybmFtZTtcclxuXHJcbiAgICBpZihhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lICE9PSBlbG10LnNldHRpbmdzRGlzcGxheU5hbWUudmFsdWVcclxuICAgICYmIGVsbXQuc2V0dGluZ3NEaXNwbGF5TmFtZS52YWx1ZSAhPT0gbnVsbCl7XHJcbiAgICAgICAgbmV3VXNlcm5hbWUgPSBlbG10LnNldHRpbmdzRGlzcGxheU5hbWUudmFsdWUudHJpbSgpLnJlcGxhY2UoLyArKD89ICkvZywnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUHJvZmlsZShhdXRoLmN1cnJlbnRVc2VyLCB7XHJcbiAgICAgICAgZGlzcGxheU5hbWU6IG5ld1VzZXJuYW1lXHJcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG5cclxuICAgICAgICBlbG10LnNhdmVQcm9maWxlQnV0dG9uLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cInVpbCB1aWwtY2hlY2tcIj48L2k+IFNhdmVkJztcclxuXHJcbiAgICAgICAgdXBkYXRlVUkoKTtcclxuICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgZWxtdC5zYXZlUHJvZmlsZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJ1aWwgdWlsLXRpbWVzXCI+PC9pPiBVbmFibGUgdG8gU2F2ZSc7XHJcbiAgICAgIH0pO1xyXG59XHJcblxyXG4vLyBTZW5kaW5nIHZlcmlmaWNhdGlvbiBlbWFpbFxyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlFbWFpbCgpIHtcclxuICAgIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihhdXRoLmN1cnJlbnRVc2VyKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0KCd2ZXJpZmljYXRpb24gRW1haWwgc2VudCcpXHJcbiAgICAgICAgdXBkYXRlVUkoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhbGxvd1NhdmUoKXtcclxuICAgIGF1dGgub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uKHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciAmJiByb3V0ZSA9PSBcImFwcC9zZXR0aW5nc1wiKSB7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gR2V0dGluZyBFbGVtZW50c1xyXG4gICAgICAgICAgICBjb25zdCBlbG10ID0gaW1wb3J0RUxlbW50c0J5SUQoW1xyXG4gICAgICAgICAgICAgICAgXCJzZXR0aW5nc0Rpc3BsYXlOYW1lXCIsXHJcbiAgICAgICAgICAgICAgICBcInNldHRpbmdzRW1haWxcIixcclxuICAgICAgICAgICAgICAgIFwic2V0dGluZ3NQaG9uZU51bWJlclwiLFxyXG4gICAgICAgICAgICAgICAgXCJzYXZlUHJvZmlsZUJ1dHRvblwiXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgZWxtdC5zYXZlUHJvZmlsZUJ1dHRvbi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJ1aWwgdWlsLXNhdmVcIj48L2k+IFNhdmUnO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZihlbG10LnNldHRpbmdzRGlzcGxheU5hbWUudmFsdWUgIT09IHVzZXIuZGlzcGxheU5hbWVcclxuICAgICAgICAgICAgJiYgZWxtdC5zZXR0aW5nc0VtYWlsLnZhbHVlICE9PSB1c2VyLmVtYWlsXHJcbiAgICAgICAgICAgICYmIGVsbXQuc2V0dGluZ3NQaG9uZU51bWJlci52YWx1ZSAhPT0gdXNlci5waG9uZU51bWJlcil7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVTYXZlQnV0dG9uKCdzYXZlUHJvZmlsZUJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkaXNBbGxvd1NhdmUoKXtcclxuICAgIGRpc2FibGVTYXZlQnV0dG9uKCdzYXZlUHJvZmlsZUJ1dHRvbicpO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/settings/accountSettings.js\n");

/***/ })

}]);